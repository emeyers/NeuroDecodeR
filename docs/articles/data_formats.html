<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Data formats â€¢ NeuroDecodeR</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/sandstone/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Data formats">
<meta property="og:description" content="NeuroDecodeR">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">NeuroDecodeR</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.1.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">Home</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Tutorials
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/introduction_tutorial.html">Introductory tutorial</a>
    </li>
    <li>
      <a href="../articles/generalization_tutorial.html">Generalization analysis tutorial</a>
    </li>
  </ul>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Documentation
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/data_formats.html">Data formats</a>
    </li>
    <li>
      <a href="../articles/datasets.html">Datasets</a>
    </li>
    <li>
      <a href="../articles/NDR_object_specification.html">NDR object specification</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/emeyers/NeuroDecodeR/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Data formats</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/emeyers/NeuroDecodeR/blob/HEAD/vignettes/data_formats.Rmd" class="external-link"><code>vignettes/data_formats.Rmd</code></a></small>
      <div class="hidden name"><code>data_formats.Rmd</code></div>

    </div>

    
    
<p>The NeuroDecodeR (NDR) uses two very similar data formats called
<code>raster format</code> and <code>binned format</code>. For almost
all analysis, one starts by saving data from each site in
<code>raster format</code>. One then converts the data to
<code>binned format</code> using the <code><a href="../reference/create_binned_data.html">create_binned_data()</a></code>
which has the data from all the sites in a single data frame at a
coarser temporal resolution that is stored in a single file. The
<code>binned format</code> data is then used in all subsequent decoding
analyses. More information about what is required to have data in these
specified formats is described below.</p>
<div class="section level2">
<h2 id="raster-format">Raster format<a class="anchor" aria-label="anchor" href="#raster-format"></a>
</h2>
<p>Raster format data contains the data at the highest temporal
resolution. For raster data, there is a separate file that contains a
data frame of data each site (e.g., for electrophysiology experiments
there is a separate file for each single neuron, for EEG experiments
there is a separate file for each EEG channel, etc.). The reason for
having data from each site in a separate file is to prevent memory from
running out of memory when trying to load data from many sites when the
data is at a high temporal resolution.</p>
<p>For raster format data, the number of rows in the data frame
correspond to the number of trials in the experiment. Data that is in
raster format is a data frame that must contain variables (columns) that
start with the following prefixes:</p>
<ol style="list-style-type: decimal">
<li><p><code>labels.XXX</code> These variables contain labels of which
experimental conditions were shown on a given trial.</p></li>
<li><p><code>time.XXX_YYY</code> These variables contain the data for a
given time, where where XXX is the start time of the data in a
particular bin and YYY is the end time. The time interval should be
specified such in the form [XXX, YYY), so that the start time is a
closed interval and the end time is an open interval. Thus, for data
that is recording continuously, the value YYY of one bin, would be equal
to the value XXX for the next bin (e.g., <code>time.100_101</code>,
<code>time.101_102</code>, <code>time.102_103</code>, etc.).</p></li>
</ol>
<p>There can also be two additional optional variables in a raster
format data frame which are:</p>
<ol start="3" style="list-style-type: decimal">
<li><p><code>site_info.XXX</code> These variables contain additional
meta data about the site. For example, one could have a variable called
<code>site_info.brain_area</code> which indicates which brain region a
given site came from. All rows for a given <code>site_info.XXX</code>
variable typically have the same value.</p></li>
<li><p><code>trial_number</code> This variable specifies a unique number
for each row indicating which trial a given row of data came from. This
is useful for data where all sites were recorded simultaneously in order
to allow one to do the decoding on actual simultaneously recorded data
(e.g., by using the <code><a href="../reference/ds_basic.html">ds_basic()</a></code>
<code>create_simultaneously_recorded_populations</code>
argument).</p></li>
</ol>
<p>The class attribute for data in raster format should be set to
<code>attr(raster_data, "class") &lt;- c("raster_data", "data.frame")</code>.
This will enable the plot() function to correctly plot data in raster
format.</p>
<div class="section level3">
<h3 id="checking-if-data-is-in-valid-raster-format">Checking if data is in valid raster format<a class="anchor" aria-label="anchor" href="#checking-if-data-is-in-valid-raster-format"></a>
</h3>
<p>To test whether data correctly conforms to the requirements of raster
format, one can use the internal function
<code>NeuroDecodeR:::test_valid_raster_data_format()</code>.</p>
</div>
<div class="section level3">
<h3 id="example-raster-format-data">Example raster-format data<a class="anchor" aria-label="anchor" href="#example-raster-format-data"></a>
</h3>
<p>Below is an example of raster format data file from the <a href="datasets.html">Zhang-Desimone 7 object data set</a>.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">raster_dir_name</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, package <span class="op">=</span> <span class="st">"NeuroDecodeR"</span><span class="op">)</span>, <span class="st">"Zhang_Desimone_7object_raster_data_small_rda"</span><span class="op">)</span></span>
<span><span class="va">full_file_name</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">raster_dir_name</span>, <span class="st">"bp1001spk_01A_raster_data.rda"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># test the file is in valid raster format</span></span>
<span><span class="fu">NeuroDecodeR</span><span class="fu">::</span><span class="fu"><a href="../reference/test_valid_raster_format.html">test_valid_raster_format</a></span><span class="op">(</span><span class="va">full_file_name</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># load the data to see the variables in it</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/load.html" class="external-link">load</a></span><span class="op">(</span><span class="va">full_file_name</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">raster_data</span><span class="op">[</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">10</span><span class="op">]</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##   site_info.session_ID site_info.recording_channel site_info.unit</span></span>
<span><span class="co">## 1                 1001                           1              A</span></span>
<span><span class="co">## 2                 1001                           1              A</span></span>
<span><span class="co">## 3                 1001                           1              A</span></span>
<span><span class="co">## 4                 1001                           1              A</span></span>
<span><span class="co">## 5                 1001                           1              A</span></span>
<span><span class="co">## 6                 1001                           1              A</span></span>
<span><span class="co">##   labels.combined_ID_position labels.stimulus_position labels.stimulus_ID</span></span>
<span><span class="co">## 1                  hand_upper                    upper               hand</span></span>
<span><span class="co">## 2               flower_middle                   middle             flower</span></span>
<span><span class="co">## 3               guitar_middle                   middle             guitar</span></span>
<span><span class="co">## 4                  face_upper                    upper               face</span></span>
<span><span class="co">## 5                 kiwi_middle                   middle               kiwi</span></span>
<span><span class="co">## 6                 couch_upper                    upper              couch</span></span>
<span><span class="co">##   time.-500_-499 time.-499_-498 time.-498_-497 time.-497_-496</span></span>
<span><span class="co">## 1              0              0              0              0</span></span>
<span><span class="co">## 2              0              0              0              0</span></span>
<span><span class="co">## 3              0              0              0              0</span></span>
<span><span class="co">## 4              0              0              0              0</span></span>
<span><span class="co">## 5              0              0              0              0</span></span>
<span><span class="co">## 6              0              0              0              0</span></span></code></pre>
</div>
</div>
<div class="section level2">
<h2 id="binned-format">Binned format<a class="anchor" aria-label="anchor" href="#binned-format"></a>
</h2>
<p>Binned format data contains data from multiple sites (e.g., data from
many neurons, EEG channels, etc.). Data that is in binned format is very
similar to data that is in raster format except that it contains
information from multiple sites and usually contains the information at
a coarser temporal resolution. For example, binned data would typically
contain firing rates over some time interval sampled at a lower rate, as
opposed to raster format data that would typically contain individual
spikes sampled at a higher rate. Binned format data is typically created
from raster format data using the function
<code><a href="../reference/create_binned_data.html">create_binned_data()</a></code> which converts a directory of raster
format files into a binned-format file that is used in subsequent
decoding analyses.</p>
<p>Binned format data must be in a data frame where the number of rows
in the data frame correspond to the number of trial in all experimental
recording sessions across all sites. The binned format data frame must
also contain the variables that start with the following prefixes:</p>
<ol style="list-style-type: decimal">
<li><p><code>siteID.XXX</code> A unique number indicating a site a given
row of data corresponds to. These are typically automatically generated
by the <code><a href="../reference/create_binned_data.html">create_binned_data()</a></code> function.</p></li>
<li><p><code>labels.XXX</code> These variables contain labels of which
experimental conditions occurred on a given trial. These are typically
copied from the raster data when <code><a href="../reference/create_binned_data.html">create_binned_data()</a></code> is
called.</p></li>
<li><p><code>time.XXX_YYY</code> These variables contain data in a time
range from [XXX, YYY). These values are typically derived from the
raster data <code>time.XXX_YYY</code> values when the
<code><a href="../reference/create_binned_data.html">create_binned_data()</a></code> is called.</p></li>
</ol>
<p>There can also be two additional optional variables in a binned
format data frame which are:</p>
<ol start="4" style="list-style-type: decimal">
<li><p><code>site_info.XXX</code> These variables contain additional
meta data out the site. For example, one could have a variable called
<code>site_info.brain_area</code> which indicated which brain region a
given site came from.</p></li>
<li><p><code>trial_number</code> This is a variable that specifies a
unique for each row indicating which trial a given row of data came
from. This is useful for data where all sites were recorded
simultaneously in order to allow one to do the decoding on actual
simultaneously recorded data (e.g., by using the <code><a href="../reference/ds_basic.html">ds_basic()</a></code>
<code>create_simultaneously_recorded_populations</code>
argument).</p></li>
</ol>
<div class="section level3">
<h3 id="checking-if-data-is-in-valid-binned-format">Checking if data is in valid binned format<a class="anchor" aria-label="anchor" href="#checking-if-data-is-in-valid-binned-format"></a>
</h3>
<p>To test whether data correctly conforms to the requirements of binned
format, one can use the internal function
<code>NeuroDecodeR:::test_valid_binned_data_format()</code>.</p>
</div>
<div class="section level3">
<h3 id="example-binned-format-data">Example binned-format data<a class="anchor" aria-label="anchor" href="#example-binned-format-data"></a>
</h3>
<p>Below is an example of binned format data file from the <a href="datasets.html">Zhang-Desimone 7 object data set</a>.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">binned_file_name</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata/ZD_150bins_50sampled.Rda"</span>, package<span class="op">=</span><span class="st">"NeuroDecodeR"</span><span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="co"># test the file is in valid binned format using an internal function</span></span>
<span><span class="fu">NeuroDecodeR</span><span class="fu">:::</span><span class="fu"><a href="../reference/test_valid_binned_format.html">test_valid_binned_format</a></span><span class="op">(</span><span class="va">binned_file_name</span><span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="co"># load the data to see the variables in it</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/load.html" class="external-link">load</a></span><span class="op">(</span><span class="va">binned_file_name</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">binned_data</span><span class="op">[</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">10</span><span class="op">]</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##   siteID site_info.session_ID site_info.recording_channel site_info.unit</span></span>
<span><span class="co">## 1      1                 1001                           1              A</span></span>
<span><span class="co">## 2      1                 1001                           1              A</span></span>
<span><span class="co">## 3      1                 1001                           1              A</span></span>
<span><span class="co">## 4      1                 1001                           1              A</span></span>
<span><span class="co">## 5      1                 1001                           1              A</span></span>
<span><span class="co">## 6      1                 1001                           1              A</span></span>
<span><span class="co">##   labels.combined_ID_position labels.stimulus_position labels.stimulus_ID</span></span>
<span><span class="co">## 1                  hand_upper                    upper               hand</span></span>
<span><span class="co">## 2               flower_middle                   middle             flower</span></span>
<span><span class="co">## 3               guitar_middle                   middle             guitar</span></span>
<span><span class="co">## 4                  face_upper                    upper               face</span></span>
<span><span class="co">## 5                 kiwi_middle                   middle               kiwi</span></span>
<span><span class="co">## 6                 couch_upper                    upper              couch</span></span>
<span><span class="co">##   time.-500_-350 time.-450_-300 time.-400_-250</span></span>
<span><span class="co">## 1    0.006666667    0.013333333    0.020000000</span></span>
<span><span class="co">## 2    0.000000000    0.006666667    0.006666667</span></span>
<span><span class="co">## 3    0.000000000    0.000000000    0.000000000</span></span>
<span><span class="co">## 4    0.000000000    0.000000000    0.000000000</span></span>
<span><span class="co">## 5    0.000000000    0.000000000    0.000000000</span></span>
<span><span class="co">## 6    0.000000000    0.006666667    0.006666667</span></span></code></pre>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Ethan Meyers.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
